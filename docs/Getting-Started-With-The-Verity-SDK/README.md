
# Getting Started with the Verity SDK for Java

## What is the Verity SDK?

The goal of the Verity SDK is easy application integration with the Verity server. This integration allows for SSI-enabled workflows like creating connections, issuing credentials, requesting proof, and other general pairwise interactions. The SDK uses libindy and DID comm protocols to securely authenticate and communicate with the Verity server. The creation of language specific SDKs allow developers to quickly integrate their backend services into the world of SSI with minimal overhead.

## Running the Example Java Application (Ubuntu 16.04)

These steps target the x86-64 architecture running Ubuntu 16.04. If you want to run this inside a fresh VM, install [vagrant](https://www.vagrantup.com/) and (in an empty folder) run:

```sh
vagrant init ubuntu/xenial64
vagrant up
vagrant ssh
```

1. You will need docker, Java 8 (JDK), Maven, libindy and python3-pip installed on your system

	```sh
	sudo apt-get update
	sudo apt-get install docker.io default-jdk maven python3-pip
	sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 68DB5E88
	sudo add-apt-repository "deb https://repo.sovrin.org/sdk/deb xenial master"
	sudo apt-get update
	sudo apt-get install libindy=1.9.0~1122
	```
	
2. You will need to be a Trust Anchor on the Sovrin Test Ledger to run this example. Use the `new_did.py` script **in this repository** to create a new DID and then email the DID and VerKey to [support@sovrin.org](mailto:support@sovrin.org) asking for that DID to be written to the Staging Net. You should received a response within 12 hours on a weekday (often much sooner!).

	You will also need python-dependencies.txt from this repository. It's probably best to clone this repository and keep it handy.

	```
	git clone https://github.com/evernym/Getting-Started-With-The-Verity-SDK
	cd Getting-Started-With-The-Verity-SDK
	pip3 install -r python-dependencies.txt --user
	./new_did.py
	```

	:exclamation: Don't send the seed! Keep it safe. You will need it to start the Mock Verity application and any other time you want to write to the Test Ledger.

3. In a new folder (not inside Getting-Started-With-The-Verity-SDK) create a new Java application with [maven](https://maven.apache.org/guides/getting-started/maven-in-five-minutes.html).
	
	```sh
	mvn archetype:generate \
		-DgroupId=com.mycompany.app \
		-DartifactId=example-app \
		-DarchetypeArtifactId=maven-archetype-quickstart \
		-DarchetypeVersion=1.4 \
		-DinteractiveMode=false
	cd example-app
	```

4. Copy `pom.xml` from this repository to the `pom.xml` of your application

	This file is similar to the pom.xml file generated by maven, but it adds the Verity SDK JAR file as a dependency to your project and increases the target Java version to 1.8.
	
5. Copy `App.java` and `Listener.java` from this repository to `example-app/src/main/java/com/mycompany/app/`

6. Start the Mock Verity service locally with your Trust Anchor Seed created in step 2.

	```sh
	sudo docker pull evernymdev/mock-verity # Get latest version
	sudo docker run -itd --rm --network host evernymdev/mock-verity <YOUR_TRUST_ANCHOR_SEED>
	```

7. Provision against Mock Verity

	This is the process whereby your application registers and exchanges keys with the Verity application. You will also need `provision_sdk.py` from this repository. Make sure to replace \<WALLET\_KEY\_HERE\> with a new wallet password.

	```sh
	python3 provision_sdk.py --wallet-name verity-sdk-test-wallet http://localhost:8080 <WALLET_KEY_HERE>
	```
	
	Copy the resulting config to `example-app/verityConfig.json`
	
	This wallet is only used to store the keys you use to communicate with Verity.
	
	:exclamation: If you restart Mock Verity at any point, you will need to provision again.


8. Build and run the example application.

	From inside the `example-app` directory:

	```sh
	mvn package
	mvn exec:java -Dexec.mainClass="com.mycompany.app.App"
	```
	
9. The logs for the example application will print something like this:
	
	```
	Invite Details: {"sc":"MS-101","threadId":null,"s"...
	```
	
	Copy the invite details JSON object into any QR code generator.  [This one](https://www.qr-code-generator.com/) works well, but you will need to click on the "Text" tab. 

10. Download [Connect.Me](https://connect.me/) from the [App Store](https://itunes.apple.com/us/app/connect-me/id1260651672?mt=8) or the [Google Play Store](https://play.google.com/store/apps/details?id=me.connect&hl=en).

11. When you setup the app, make sure to check the "Use Staging Net" option at the bottom of the screen or this demo won't work.

	![Connect.Me Developer Mode Switch](https://i.postimg.cc/pTrdMszg/IMG-0116.png)

12. Scan the QR code with Connect.Me. You will then receive a Connection Invite, Challenge Question, Credential Offer, Credential and Proof Request in that order, demonstrating all of the protocols currently supported by the Verity SDK.

Â© 2013-2019, ALL RIGHTS RESERVED, EVERNYM INC.